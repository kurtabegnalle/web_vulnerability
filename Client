import socket
import hashlib

AUTH_OK = "Аутентификация пройдена! Добро пожаловать!"


def start_client():
    host_name = socket.gethostname()
    port = 8080

    socket_client = socket.socket()
    socket_client.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)
    socket_client.connect((host_name, port))

    print(f"Вы подключились к серверу атентификации! {host_name} , введите учетные данные!")

    while True:
        login = input("Введите логин: ")
        send_login_str = "login: " + login
        socket_client.send(send_login_str.encode())

        password = input("Введите пароль: ")
        hash_password = hashlib.sha256(password.encode()).hexdigest()
        send_passwd_str = "password: " + hash_password
        socket_client.send(send_passwd_str.encode())

        response = socket_client.recv(512).decode()
        print(response)
        if response == AUTH_OK:
            socket_client.close()
            break


if __name__ == '__main__':
    start_client()
